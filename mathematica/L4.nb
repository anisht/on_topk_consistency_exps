(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     21086,        503]
NotebookOptionsPosition[     19487,        471]
NotebookOutlinePosition[     19885,        487]
CellTagsIndexPosition[     19842,        484]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"n", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"k", " ", "=", " ", "3"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"TopK", "[", "u_", "]"}], ":=", " ", 
   RowBox[{"Ordering", "[", 
    RowBox[{"u", ",", 
     RowBox[{"-", "k"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"L4", "[", 
    RowBox[{"u_", ",", "y_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Max", "[", 
    RowBox[{"0", ",", " ", 
     RowBox[{"1", " ", "-", " ", 
      RowBox[{"u", "[", 
       RowBox[{"[", "y", "]"}], "]"}], " ", "+", " ", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"1", "/", "k"}], ")"}], 
       RowBox[{"Max", "[", 
        RowBox[{"MapIndexed", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Total", "[", "#1", "]"}], " ", "&"}], ",", " ", 
          RowBox[{"Subsets", "[", 
           RowBox[{
            RowBox[{"Delete", "[", 
             RowBox[{"u", " ", ",", "y"}], "]"}], " ", ",", " ", 
            RowBox[{"{", "k", "}"}]}], "]"}]}], "]"}], "]"}]}]}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{"L4", 
      RowBox[{"(", 
       RowBox[{"u", ",", "_"}], ")"}]}], ">"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExL4", "[", 
    RowBox[{"u_", ",", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Sum", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"p", "[", 
       RowBox[{"[", "i", "]"}], "]"}], " ", 
      RowBox[{"L4", "[", 
       RowBox[{"u", ",", " ", "i"}], "]"}]}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "n"}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"bayes", " ", "risk", " ", "of", " ", "L4"}], " ", "=", " ", 
    RowBox[{"min", " ", 
     RowBox[{"(", "ExL4", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"RiskL4", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{"Minimize", "[", 
    RowBox[{
     RowBox[{"ExL4", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], ",",
        " ", "p"}], "]"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"u1", ",", "u2", ",", " ", "u3", ",", "u4"}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"some", " ", "element", " ", "of", " ", 
     RowBox[{"prop", "[", "L4", "]"}]}], ",", " ", 
    RowBox[{
    "ie", " ", "some", " ", "u", " ", "that", " ", "minimizes", " ", 
     "risk"}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PropL4", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"ArgMin", "[", 
      RowBox[{
       RowBox[{"ExL4", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
         ",", " ", "p"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4"}], "}"}]}], "]"}], " ", 
     ",", 
     RowBox[{"{", " ", "0", "}"}]}], "]"}]}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"l_k", 
       RowBox[{"(", 
        RowBox[{"u", ",", "_"}], ")"}]}], ">", " ", 
      RowBox[{"really", " ", "should", " ", "be", " ", "u"}]}], " ", "->", 
     " ", 
     RowBox[{"topk", 
      RowBox[{"(", "u", ")"}]}]}], ",", " ", 
    RowBox[{"but", " ", "less", " ", "convenient"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExLk", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"1", " ", "-", " ", 
    RowBox[{"Total", "[", 
     RowBox[{"p", "[", 
      RowBox[{"[", 
       RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}]}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "difference", " ", "in", " ", "loss", " ", "by", " ", "linking", " ", "to",
     " ", "topk", 
    RowBox[{"(", "u", ")"}], " ", "instead", " ", "of", " ", "topk", 
    RowBox[{"(", "p", ")"}], " ", "thing"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Regret", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"ExLk", "[", 
     RowBox[{"u", ",", "p"}], "]"}], " ", "-", " ", 
    RowBox[{"ExLk", "[", 
     RowBox[{"p", ",", "p"}], "]"}]}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"expected", " ", "regret", " ", "under", " ", "L4"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegL4", "[", "p_", "]"}], ":=", 
  RowBox[{"Regret", "[", 
   RowBox[{
    RowBox[{"PropL4", "[", "p", "]"}], ",", " ", "p"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.852254714059908*^9, 3.852254714321166*^9}, {
   3.852254751391816*^9, 5.2150212799954*^-310}, {3.8522550527804832`*^9, 
   3.852255090637848*^9}, {3.852255195637582*^9, 3.852255222018835*^9}, {
   3.8522552768237753`*^9, 3.852255330491456*^9}, {3.852258389187961*^9, 
   3.852258483340625*^9}, {3.8522585181269608`*^9, 3.852258590997015*^9}, {
   3.852258635274312*^9, 3.852258688071879*^9}, {3.852258864948617*^9, 
   3.852258938276731*^9}, {3.852259925461679*^9, 3.85225994449669*^9}, {
   3.852259980227713*^9, 3.852259982061606*^9}, 3.852260093209496*^9, {
   3.8522601374375134`*^9, 3.852260153916514*^9}, {3.852260210877562*^9, 
   3.8522602211947937`*^9}, {3.8522602886949387`*^9, 3.852260318525379*^9}, {
   3.852260348671235*^9, 3.852260529698741*^9}, {3.852260698216097*^9, 
   3.85226072048123*^9}, {3.852294808619154*^9, 3.8522948184723177`*^9}, {
   3.852294981026062*^9, 3.8522950133934298`*^9}, {3.852295223954321*^9, 
   3.852295226101552*^9}, {3.852298068424254*^9, 3.85229817416923*^9}, {
   3.8522999546019077`*^9, 3.852299991474585*^9}, 3.852300177366695*^9, {
   3.852300237936336*^9, 3.8523002380000772`*^9}, {3.852304199734124*^9, 
   3.852304223438979*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Clear", "[", 
    RowBox[{"u", ",", "p"}], "]"}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"ExRegL4", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"p1", ",", "p2", ",", "p3", ",", "p4", ",", 
       RowBox[{"1", "-", "p1", "-", "p2", "-", "p3", "-", "p4"}]}], "}"}], 
     ","}], " ", "]"}], "*)"}], "\[IndentingNewLine]", " ", 
  RowBox[{"(*", 
   RowBox[{"Minimize", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"ExL4", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{"p1", ",", "p2", ",", "p3", ",", "p4", ",", "p5"}], "}"}]}],
         "]"}], ",", " ", 
       RowBox[{
        RowBox[{"p1", " ", ">=", " ", "0"}], " ", "&&", " ", 
        RowBox[{"p2", ">=", " ", "0"}], " ", "&&", " ", 
        RowBox[{"p3", ">=", "0"}], "&&", 
        RowBox[{"p4", ">=", "0"}], "&&", 
        RowBox[{"p5", ">=", "0"}]}]}], "}"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"u1", ",", "u2", ",", " ", "u3", ",", "u4"}], "}"}]}], "]"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"Expectation", "[", 
  RowBox[{
   RowBox[{"ExRegL4", "[", 
    RowBox[{"{", 
     RowBox[{"p1", ",", "p2", ",", "p3", ",", "p4", ",", 
      RowBox[{"1", "-", "p1", "-", "p2", "-", "p3", "-", "p4"}]}], "}"}], 
    "]"}], ",", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"p1", ",", "p2", ",", "p3", ",", "p4"}], "}"}], "\[Distributed]", 
    RowBox[{"DirichletDistribution", "[", 
     RowBox[{"{", 
      RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], "]"}]}]}],
   "]"}]}], "Input",
 CellChangeTimes->{{3.8523043096236753`*^9, 3.852304365433208*^9}, {
  3.852304404079615*^9, 3.8523044085217133`*^9}, {3.852304448617395*^9, 
  3.852304455389419*^9}, {3.852304498950705*^9, 3.852304657317984*^9}, {
  3.85230552649783*^9, 3.8523055541463547`*^9}, {3.852305827581489*^9, 
  3.852305870230364*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"00f32ab0-4212-41fe-9ab4-5338982b66c8"],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{
  3.85230433506321*^9, 3.852304366440856*^9, 3.852304449805296*^9, 
   3.852304644225037*^9, {3.852305859144451*^9, 3.852305870695348*^9}, 
   3.852306625001347*^9},
 CellLabel->"Out[20]=",ExpressionUUID->"57c41fea-40b0-450b-bc75-3e0628162ac1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"u", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"5", ",", " ", "2", ",", " ", "3", ",", "1", ",", " ", "4"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"p", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"0", ",", ".1", ",", ".2", ",", ".3", ",", ".4"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Ordering", "[", 
   RowBox[{"u", ",", " ", 
    RowBox[{"-", "3"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"u", "[", 
   RowBox[{"[", " ", 
    RowBox[{"Ordering", "[", 
     RowBox[{"u", ",", 
      RowBox[{"-", "3"}]}], "]"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Total", "[", 
   RowBox[{"p", "[", 
    RowBox[{"[", 
     RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExLk", "[", 
   RowBox[{"u", ",", "p"}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"PropL4", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegL4", "[", "p", "]"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"p", " ", "=", " ", 
  RowBox[{"{", 
   RowBox[{".22", ",", ".18", ",", ".2", ",", ".2", ",", ".2"}], 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{"PropL4", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ExRegL4", "[", "p", "]"}]}], "Input",
 CellChangeTimes->{{3.8522591950733957`*^9, 3.8522592201851473`*^9}, {
   3.852259259571013*^9, 3.852259284963015*^9}, {3.852259712224855*^9, 
   3.852259716093095*^9}, {3.852260027287763*^9, 3.852260064939968*^9}, {
   3.852260178388557*^9, 3.852260239723255*^9}, {3.8522605527159033`*^9, 
   3.852260633694853*^9}, 3.852260793815843*^9, {3.852294915290555*^9, 
   3.852294923839754*^9}, {3.852295133684231*^9, 3.852295175936159*^9}, 
   3.852295816135857*^9, {3.8522981881098337`*^9, 3.852298201237112*^9}, {
   3.852300184248102*^9, 3.852300190074008*^9}},
 CellLabel->
  "In[701]:=",ExpressionUUID->"4e72b11a-da7d-4629-8c32-e5882270bff5"],

Cell[BoxData["0.3999999999999999`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.8523042995057364`*^9},
 CellLabel->
  "Out[706]=",ExpressionUUID->"2f63fa80-cabc-4476-b87f-01a8f07c6971"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "3.`"}], ",", 
   RowBox[{"-", "3.`"}], ",", "0.`", ",", "0.`", ",", "0"}], "}"}]], "Output",\

 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.852304299509643*^9},
 CellLabel->
  "Out[707]=",ExpressionUUID->"8d833621-2348-43a8-9eed-6257122a54e1"],

Cell[BoxData[
 RowBox[{"-", "1.1102230246251565`*^-16"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.852304299534251*^9},
 CellLabel->
  "Out[708]=",ExpressionUUID->"283a090d-be13-404a-90c4-77874e20987f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.22`", ",", "0.18`", ",", "0.2`", ",", "0.2`", ",", "0.2`"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.852304299536922*^9},
 CellLabel->
  "Out[709]=",ExpressionUUID->"5d38e0f2-6096-47b8-8c2b-c395e28b1f90"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.`", ",", "0.`", ",", "0.`", ",", "0.`", ",", "0"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.85230429954001*^9},
 CellLabel->
  "Out[710]=",ExpressionUUID->"38f4d553-9f2b-4999-b280-3ddade488a9c"],

Cell[BoxData["0.039999999999999925`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8523001924016123`*^9, {
   3.852300224556305*^9, 3.852300242548108*^9}, 3.852304299544077*^9},
 CellLabel->
  "Out[711]=",ExpressionUUID->"4f1a56b5-066a-4789-9397-d04a295805f9"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"nsamples", "=", "10"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"dirichletSamples", " ", "=", " ", 
    RowBox[{"RandomVariate", "[", 
     RowBox[{
      RowBox[{"DirichletDistribution", "[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], "]"}], 
      ",", "nsamples"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "last", " ", "entry", " ", "needs", " ", "to", " ", "be", " ", "inferred",
      " ", "as", " ", "1"}], " ", "-", " ", 
    RowBox[{"sum", 
     RowBox[{"(", "rest", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"samples", " ", "=", " ", 
   RowBox[{"MapThread", "[", 
    RowBox[{"Append", ",", " ", 
     RowBox[{"{", 
      RowBox[{"dirichletSamples", " ", ",", " ", 
       RowBox[{"1", " ", "-", " ", 
        RowBox[{"Map", "[", 
         RowBox[{"Total", ",", " ", "dirichletSamples"}], "]"}]}]}], "}"}]}], 
    "]"}]}], " ", ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.852295316265401*^9, 3.852295364547377*^9}, {
  3.8522959996141644`*^9, 3.852296012292088*^9}, {3.852296103698536*^9, 
  3.852296126425725*^9}, {3.852296373546874*^9, 3.852296414686594*^9}, {
  3.852296494348037*^9, 3.8522965514183483`*^9}, {3.852296586912484*^9, 
  3.852296598893618*^9}, {3.852296638552771*^9, 3.852296646751287*^9}, {
  3.852296683449399*^9, 3.852296724737359*^9}, {3.852296826460886*^9, 
  3.852296953967557*^9}, {3.85229705138454*^9, 3.852297164964346*^9}, {
  3.852297390879923*^9, 3.852297396255563*^9}, {3.8522983969760313`*^9, 
  3.852298397102201*^9}},
 CellLabel->
  "In[572]:=",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"sampledL4regrets", " ", "=", " ", 
   RowBox[{"Map", "[", 
    RowBox[{"ExRegL4", ",", "samples"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Mean", "[", "sampledL4regrets", "]"}]}], "Input",
 CellChangeTimes->{{3.852297198129825*^9, 3.8522972131024942`*^9}, {
  3.852297246416066*^9, 3.85229725356999*^9}, {3.852297346585836*^9, 
  3.8522973852078943`*^9}, {3.852298261763997*^9, 3.8522982662843437`*^9}, {
  3.852300256010501*^9, 3.8523002612303667`*^9}},
 CellLabel->
  "In[577]:=",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],

Cell[BoxData["0.007400301248661945`"], "Output",
 CellChangeTimes->{
  3.852297214014969*^9, 3.852297248289308*^9, 3.852297334185616*^9, {
   3.852297386473589*^9, 3.8522974091191072`*^9}, 3.8522977608113317`*^9, 
   3.852298391181734*^9, 3.8522984347572107`*^9, 3.8523002204187107`*^9, {
   3.8523002529135017`*^9, 3.852300262133934*^9}},
 CellLabel->
  "Out[578]=",ExpressionUUID->"af1a47d0-cd87-4d73-8fd0-ce60e74a1e93"]
}, Open  ]]
},
WindowSize->{1032, 771},
WindowMargins->{{59, Automatic}, {Automatic, 284}},
FrontEndVersion->"13.0 for Mac OS X x86 (64-bit) (December 2, 2021)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"f905429c-326c-437b-b322-aa7dccfe7ab1"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 6193, 166, 409, "Input",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],
Cell[CellGroupData[{
Cell[6776, 190, 2094, 53, 94, "Input",ExpressionUUID->"00f32ab0-4212-41fe-9ab4-5338982b66c8"],
Cell[8873, 245, 300, 5, 57, "Output",ExpressionUUID->"57c41fea-40b0-450b-bc75-3e0628162ac1"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9210, 255, 2042, 50, 304, "Input",ExpressionUUID->"4e72b11a-da7d-4629-8c32-e5882270bff5"],
Cell[11255, 307, 859, 12, 34, "Output",ExpressionUUID->"2f63fa80-cabc-4476-b87f-01a8f07c6971"],
Cell[12117, 321, 962, 17, 34, "Output",ExpressionUUID->"8d833621-2348-43a8-9eed-6257122a54e1"],
Cell[13082, 340, 879, 13, 34, "Output",ExpressionUUID->"283a090d-be13-404a-90c4-77874e20987f"],
Cell[13964, 355, 934, 15, 34, "Output",ExpressionUUID->"5d38e0f2-6096-47b8-8c2b-c395e28b1f90"],
Cell[14901, 372, 924, 15, 34, "Output",ExpressionUUID->"38f4d553-9f2b-4999-b280-3ddade488a9c"],
Cell[15828, 389, 859, 12, 34, "Output",ExpressionUUID->"4f1a56b5-066a-4789-9397-d04a295805f9"]
}, Open  ]],
Cell[16702, 404, 1732, 39, 115, "Input",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],
Cell[CellGroupData[{
Cell[18459, 447, 587, 12, 52, "Input",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],
Cell[19049, 461, 422, 7, 34, "Output",ExpressionUUID->"af1a47d0-cd87-4d73-8fd0-ce60e74a1e93"]
}, Open  ]]
}
]
*)

