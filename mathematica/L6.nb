(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     23790,        525]
NotebookOptionsPosition[     22214,        495]
NotebookOutlinePosition[     22611,        511]
CellTagsIndexPosition[     22568,        508]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"n", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"k", " ", "=", " ", "3"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"TopK", "[", "u_", "]"}], ":=", " ", 
   RowBox[{"Ordering", "[", 
    RowBox[{"u", ",", 
     RowBox[{"-", "k"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"sigmam", "[", 
   RowBox[{"u_", ",", " ", "m_"}], "]"}], " ", ":=", 
  RowBox[{"Max", "[", 
   RowBox[{"MapIndexed", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Total", "[", "#1", "]"}], " ", "&"}], ",", " ", 
     RowBox[{"Permutations", "[", 
      RowBox[{"u", ",", " ", 
       RowBox[{"{", "m", "}"}]}], "]"}]}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"L6", "[", 
    RowBox[{"u_", ",", "y_"}], "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"Max", "[", 
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"Max", "[", "u", "]"}], "}"}], ",", 
       RowBox[{"MapIndexed", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"1", " ", "-", " ", 
           RowBox[{"(", 
            RowBox[{"k", " ", "/", " ", "#1"}], ")"}], " ", "+", " ", 
           RowBox[{"(", " ", 
            RowBox[{
             RowBox[{"sigmam", "[", 
              RowBox[{"u", ",", " ", "#1"}], "]"}], "/", " ", "#1"}], ")"}]}],
           "&"}], ",", " ", 
         RowBox[{"Range", "[", 
          RowBox[{
           RowBox[{"k", "+", "1"}], ",", " ", "n"}], "]"}]}], "]"}]}], "]"}], 
     "]"}], "-", " ", 
    RowBox[{"u", "[", 
     RowBox[{"[", "y", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{"L6", 
      RowBox[{"(", 
       RowBox[{"u", ",", "_"}], ")"}]}], ">"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExL6", "[", 
    RowBox[{"u_", ",", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Sum", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"p", "[", 
       RowBox[{"[", "i", "]"}], "]"}], " ", 
      RowBox[{"L6", "[", 
       RowBox[{"u", ",", " ", "i"}], "]"}]}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "n"}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"bayes", " ", "risk", " ", "of", " ", "L6"}], " ", "=", " ", 
    RowBox[{"min", " ", 
     RowBox[{"(", "ExL6", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"RiskL6", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"Minimize", "[", 
     RowBox[{
      RowBox[{"ExL6", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
        ",", " ", "p"}], "]"}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"u1", ",", "u2", ",", " ", "u3", ",", "u4"}], "}"}]}], "]"}], 
    "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"some", " ", "element", " ", "of", " ", 
     RowBox[{"prop", "[", "L6", "]"}]}], ",", " ", 
    RowBox[{
    "ie", " ", "some", " ", "u", " ", "that", " ", "minimizes", " ", 
     "risk"}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PropL6", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"ArgMin", "[", 
      RowBox[{
       RowBox[{"ExL6", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
         ",", " ", "p"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4"}], "}"}]}], "]"}], " ", 
     ",", 
     RowBox[{"{", " ", "0", "}"}]}], "]"}]}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"l_k", 
       RowBox[{"(", 
        RowBox[{"u", ",", "_"}], ")"}]}], ">", " ", 
      RowBox[{"really", " ", "should", " ", "be", " ", "u"}]}], " ", "->", 
     " ", 
     RowBox[{"topk", 
      RowBox[{"(", "u", ")"}]}]}], ",", " ", 
    RowBox[{"but", " ", "less", " ", "convenient"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExLk", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"1", " ", "-", " ", 
    RowBox[{"Total", "[", 
     RowBox[{"p", "[", 
      RowBox[{"[", 
       RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}]}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "difference", " ", "in", " ", "loss", " ", "by", " ", "linking", " ", "to",
     " ", "topk", 
    RowBox[{"(", "u", ")"}], " ", "instead", " ", "of", " ", "topk", 
    RowBox[{"(", "p", ")"}], " ", "thing"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Regret", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"ExLk", "[", 
     RowBox[{"u", ",", "p"}], "]"}], " ", "-", " ", 
    RowBox[{"ExLk", "[", 
     RowBox[{"p", ",", "p"}], "]"}]}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"expected", " ", "regret", " ", "under", " ", "L6"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExRegL6", "[", "p_", "]"}], ":=", 
   RowBox[{"Regret", "[", 
    RowBox[{
     RowBox[{"PropL6", "[", "p", "]"}], ",", " ", "p"}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.852254714059908*^9, 3.852254714321166*^9}, {
   3.852254751391816*^9, 5.2150212799954*^-310}, {3.8522550527804832`*^9, 
   3.852255090637848*^9}, {3.852255195637582*^9, 3.852255222018835*^9}, {
   3.8522552768237753`*^9, 3.852255330491456*^9}, {3.852258389187961*^9, 
   3.852258483340625*^9}, {3.8522585181269608`*^9, 3.852258590997015*^9}, {
   3.852258635274312*^9, 3.852258688071879*^9}, {3.852258864948617*^9, 
   3.852258938276731*^9}, {3.852259925461679*^9, 3.85225994449669*^9}, {
   3.852259980227713*^9, 3.852259982061606*^9}, 3.852260093209496*^9, {
   3.8522601374375134`*^9, 3.852260153916514*^9}, {3.852260210877562*^9, 
   3.8522602211947937`*^9}, {3.8522602886949387`*^9, 3.852260318525379*^9}, {
   3.852260348671235*^9, 3.852260529698741*^9}, {3.852260698216097*^9, 
   3.85226072048123*^9}, {3.852294808619154*^9, 3.8522948184723177`*^9}, {
   3.852294981026062*^9, 3.8522950133934298`*^9}, {3.852295223954321*^9, 
   3.852295226101552*^9}, {3.852298068424254*^9, 3.85229817416923*^9}, {
   3.852298558941045*^9, 3.852298625377377*^9}, {3.852298800107759*^9, 
   3.852298821862274*^9}, {3.852298984823217*^9, 3.8522989917413282`*^9}, {
   3.8522990520268707`*^9, 3.852299082075103*^9}, {3.8522992253641148`*^9, 
   3.852299232121875*^9}, {3.852299372031898*^9, 3.852299372671775*^9}, {
   3.852299453370572*^9, 3.852299453895582*^9}, {3.852299489315219*^9, 
   3.85229948936808*^9}, {3.852299834034676*^9, 3.8522998341081038`*^9}, 
   3.852299910556705*^9, 3.852300407662175*^9},
 CellLabel->"In[51]:=",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"u", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"5", ",", " ", "2", ",", " ", "3", ",", "1", ",", " ", "4"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"p", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"0", ",", ".1", ",", ".2", ",", ".3", ",", ".4"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Ordering", "[", 
   RowBox[{"u", ",", " ", 
    RowBox[{"-", "3"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"u", "[", 
   RowBox[{"[", " ", 
    RowBox[{"Ordering", "[", 
     RowBox[{"u", ",", 
      RowBox[{"-", "3"}]}], "]"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Total", "[", 
   RowBox[{"p", "[", 
    RowBox[{"[", 
     RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExLk", "[", 
   RowBox[{"u", ",", "p"}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"ExL6", "[", 
  RowBox[{"u", ",", "p"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"RiskL6", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{"PropL6", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegL6", "[", "p", "]"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"p", " ", "=", " ", 
  RowBox[{"{", 
   RowBox[{".22", ",", ".18", ",", ".2", ",", ".2", ",", ".2"}], 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{"PropL6", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ExRegL6", "[", "p", "]"}]}], "Input",
 CellChangeTimes->{{3.8522591950733957`*^9, 3.8522592201851473`*^9}, {
   3.852259259571013*^9, 3.852259284963015*^9}, {3.852259712224855*^9, 
   3.852259716093095*^9}, {3.852260027287763*^9, 3.852260064939968*^9}, {
   3.852260178388557*^9, 3.852260239723255*^9}, {3.8522605527159033`*^9, 
   3.852260633694853*^9}, 3.852260793815843*^9, {3.852294915290555*^9, 
   3.852294923839754*^9}, {3.852295133684231*^9, 3.852295175936159*^9}, 
   3.852295816135857*^9, {3.8522981881098337`*^9, 3.852298201237112*^9}, {
   3.8522986286742764`*^9, 3.852298635881805*^9}, {3.852299086161332*^9, 
   3.852299092773994*^9}, {3.852299141205755*^9, 3.852299186599845*^9}, {
   3.852299262191646*^9, 3.852299290586321*^9}, {3.852299326148093*^9, 
   3.852299329027522*^9}, {3.85229938645115*^9, 3.852299429054861*^9}, {
   3.852299462007001*^9, 3.8522994674301367`*^9}, {3.852299498806327*^9, 
   3.852299504308041*^9}, {3.8522999024213037`*^9, 3.852299907394882*^9}},
 CellLabel->
  "In[619]:=",ExpressionUUID->"4e72b11a-da7d-4629-8c32-e5882270bff5"],

Cell[BoxData["0.3999999999999999`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410941607*^9},
 CellLabel->
  "Out[624]=",ExpressionUUID->"8eca3e7f-1fe9-4dcc-b7ea-e98d74e469e8"],

Cell[BoxData["2.3`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410945303*^9},
 CellLabel->
  "Out[625]=",ExpressionUUID->"fa06a9a9-91d6-4df5-a01a-68bf2d47021f"],

Cell[BoxData["0.1`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410969754*^9},
 CellLabel->
  "Out[626]=",ExpressionUUID->"00b54249-b30c-42f6-8332-30c51913f722"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1.`"}], ",", 
   RowBox[{"-", "1.`"}], ",", "0.`", ",", "0.`", ",", "0"}], "}"}]], "Output",\

 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410972947*^9},
 CellLabel->
  "Out[627]=",ExpressionUUID->"3503dcf1-071f-47da-97da-a4da0b910033"],

Cell[BoxData[
 RowBox[{"-", "1.1102230246251565`*^-16"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410976022*^9},
 CellLabel->
  "Out[628]=",ExpressionUUID->"16e41cb0-402b-4f93-a936-1b50867951c9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.22`", ",", "0.18`", ",", "0.2`", ",", "0.2`", ",", "0.2`"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410979389*^9},
 CellLabel->
  "Out[629]=",ExpressionUUID->"34bfa8a3-144a-40a7-94ea-bd150c022197"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.`", ",", 
   RowBox[{"-", "1.`"}], ",", "0.`", ",", 
   RowBox[{"-", "1.`"}], ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300410985437*^9},
 CellLabel->
  "Out[630]=",ExpressionUUID->"c793f343-6823-475f-bcd0-b06d259d3133"],

Cell[BoxData[
 RowBox[{"-", "1.1102230246251565`*^-16"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9, {
   3.8522981907189007`*^9, 3.8522982015941887`*^9}, 3.8522986362511463`*^9, {
   3.852299093085924*^9, 3.852299187132558*^9}, {3.852299237111425*^9, 
   3.852299291224571*^9}, 3.8522993294542007`*^9, {3.852299377159678*^9, 
   3.8522994677905407`*^9}, 3.852299504676643*^9, 3.852299843779354*^9, 
   3.852300127498036*^9, 3.852300334380322*^9, 3.852300411009618*^9},
 CellLabel->
  "Out[631]=",ExpressionUUID->"993209a2-967f-4f0d-895a-bc3f3bcd4b84"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"nsamples", "=", "1000"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"dirichletSamples", " ", "=", " ", 
    RowBox[{"RandomVariate", "[", 
     RowBox[{
      RowBox[{"DirichletDistribution", "[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], "]"}], 
      ",", "nsamples"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "last", " ", "entry", " ", "needs", " ", "to", " ", "be", " ", "inferred",
      " ", "as", " ", "1"}], " ", "-", " ", 
    RowBox[{"sum", 
     RowBox[{"(", "rest", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"samples", " ", "=", " ", 
   RowBox[{"MapThread", "[", 
    RowBox[{"Append", ",", " ", 
     RowBox[{"{", 
      RowBox[{"dirichletSamples", " ", ",", " ", 
       RowBox[{"1", " ", "-", " ", 
        RowBox[{"Map", "[", 
         RowBox[{"Total", ",", " ", "dirichletSamples"}], "]"}]}]}], "}"}]}], 
    "]"}]}], " ", ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.852295316265401*^9, 3.852295364547377*^9}, {
  3.8522959996141644`*^9, 3.852296012292088*^9}, {3.852296103698536*^9, 
  3.852296126425725*^9}, {3.852296373546874*^9, 3.852296414686594*^9}, {
  3.852296494348037*^9, 3.8522965514183483`*^9}, {3.852296586912484*^9, 
  3.852296598893618*^9}, {3.852296638552771*^9, 3.852296646751287*^9}, {
  3.852296683449399*^9, 3.852296724737359*^9}, {3.852296826460886*^9, 
  3.852296953967557*^9}, {3.85229705138454*^9, 3.852297164964346*^9}, {
  3.852297390879923*^9, 3.852297396255563*^9}, {3.8522983969760313`*^9, 
  3.852298397102201*^9}, {3.852298653638093*^9, 3.852298653760057*^9}},
 CellLabel->
  "In[632]:=",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"sampledL6regrets", " ", "=", " ", 
   RowBox[{"Map", "[", 
    RowBox[{"ExRegL6", ",", "samples"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Mean", "[", "sampledL6regrets", "]"}]}], "Input",
 CellChangeTimes->{{3.852297198129825*^9, 3.8522972131024942`*^9}, {
  3.852297246416066*^9, 3.85229725356999*^9}, {3.852297346585836*^9, 
  3.8522973852078943`*^9}, {3.852298261763997*^9, 3.8522982662843437`*^9}, {
  3.852298644692643*^9, 3.852298649507325*^9}, {3.852299519924251*^9, 
  3.852299526232801*^9}},
 CellLabel->
  "In[635]:=",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],

Cell[BoxData[
 RowBox[{"-", "1.1102230246251566`*^-19"}]], "Output",
 CellChangeTimes->{
  3.852297214014969*^9, 3.852297248289308*^9, 3.852297334185616*^9, {
   3.852297386473589*^9, 3.8522974091191072`*^9}, 3.8522977608113317`*^9, 
   3.852298391181734*^9, 3.8522984347572107`*^9, {3.8522986500208197`*^9, 
   3.852298660908312*^9}, 3.852299531206189*^9, 3.852299850973406*^9, 
   3.852300343499353*^9, 3.852300425425745*^9},
 CellLabel->
  "Out[636]=",ExpressionUUID->"a3de94ee-1305-4241-8ba2-7658d3db113f"]
}, Open  ]]
},
WindowSize->{1032, 509},
WindowMargins->{{43, Automatic}, {11, Automatic}},
FrontEndVersion->"13.0 for Mac OS X x86 (64-bit) (December 2, 2021)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"6820c239-4def-4343-a629-2ce40481567d"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 7149, 190, 527, "Input",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],
Cell[CellGroupData[{
Cell[7732, 214, 2576, 58, 346, "Input",ExpressionUUID->"4e72b11a-da7d-4629-8c32-e5882270bff5"],
Cell[10311, 274, 1075, 15, 34, "Output",ExpressionUUID->"8eca3e7f-1fe9-4dcc-b7ea-e98d74e469e8"],
Cell[11389, 291, 1060, 15, 34, "Output",ExpressionUUID->"fa06a9a9-91d6-4df5-a01a-68bf2d47021f"],
Cell[12452, 308, 1060, 15, 34, "Output",ExpressionUUID->"00b54249-b30c-42f6-8332-30c51913f722"],
Cell[13515, 325, 1180, 20, 34, "Output",ExpressionUUID->"3503dcf1-071f-47da-97da-a4da0b910033"],
Cell[14698, 347, 1097, 16, 34, "Output",ExpressionUUID->"16e41cb0-402b-4f93-a936-1b50867951c9"],
Cell[15798, 365, 1152, 18, 34, "Output",ExpressionUUID->"34bfa8a3-144a-40a7-94ea-bd150c022197"],
Cell[16953, 385, 1178, 19, 34, "Output",ExpressionUUID->"c793f343-6823-475f-bcd0-b06d259d3133"],
Cell[18134, 406, 1097, 16, 34, "Output",ExpressionUUID->"993209a2-967f-4f0d-895a-bc3f3bcd4b84"]
}, Open  ]],
Cell[19246, 425, 1780, 39, 115, "Input",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],
Cell[CellGroupData[{
Cell[21051, 468, 634, 13, 52, "Input",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],
Cell[21688, 483, 510, 9, 34, "Output",ExpressionUUID->"a3de94ee-1305-4241-8ba2-7658d3db113f"]
}, Open  ]]
}
]
*)

