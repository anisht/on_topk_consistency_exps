(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     42751,       1011]
NotebookOptionsPosition[     40409,        968]
NotebookOutlinePosition[     40808,        984]
CellTagsIndexPosition[     40765,        981]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"n", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"k", " ", "=", " ", "3"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"TopK", "[", "u_", "]"}], ":=", " ", 
   RowBox[{"Ordering", "[", 
    RowBox[{"u", ",", 
     RowBox[{"-", "k"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"L3", "[", 
    RowBox[{"u_", ",", "y_"}], "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"1", "/", "k"}], ")"}], " ", 
    RowBox[{"Sum", "[", 
     RowBox[{
      RowBox[{"Max", "[", 
       RowBox[{"0", ",", "  ", 
        RowBox[{
         RowBox[{"RankedMax", "[", 
          RowBox[{
           RowBox[{"u", " ", "-", " ", 
            RowBox[{"UnitVector", "[", 
             RowBox[{"n", ",", "y"}], "]"}]}], ",", " ", "i"}], "]"}], " ", 
         "+", " ", "1", "-", " ", 
         RowBox[{"u", "[", 
          RowBox[{"[", "y", "]"}], "]"}]}]}], "]"}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", "k"}], "}"}]}], "]"}]}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{"L3", 
      RowBox[{"(", 
       RowBox[{"u", ",", "_"}], ")"}]}], ">"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExL3", "[", 
    RowBox[{"u_", ",", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Sum", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"p", "[", 
       RowBox[{"[", "i", "]"}], "]"}], " ", 
      RowBox[{"L3", "[", 
       RowBox[{"u", ",", " ", "i"}], "]"}]}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "n"}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"bayes", " ", "risk", " ", "of", " ", "L3"}], " ", "=", " ", 
    RowBox[{"min", " ", 
     RowBox[{"(", "ExL3", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"RiskL3", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"Minimize", "[", 
     RowBox[{
      RowBox[{"ExL3", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
        ",", " ", "p"}], "]"}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"u1", ",", "u2", ",", " ", "u3", ",", "u4"}], "}"}]}], "]"}], 
    "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"some", " ", "element", " ", "of", " ", 
     RowBox[{"prop", "[", "L3", "]"}]}], ",", " ", 
    RowBox[{
    "ie", " ", "some", " ", "u", " ", "that", " ", "minimizes", " ", 
     "risk"}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PropL3", "[", "p_", "]"}], " ", ":=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"ArgMin", "[", 
      RowBox[{
       RowBox[{"ExL3", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4", ",", "0"}], "}"}], 
         ",", " ", "p"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"u1", ",", "u2", ",", "u3", ",", "u4"}], "}"}]}], "]"}], " ", 
     ",", 
     RowBox[{"{", " ", "0", "}"}]}], "]"}]}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"<", "p"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"l_k", 
       RowBox[{"(", 
        RowBox[{"u", ",", "_"}], ")"}]}], ">", " ", 
      RowBox[{"really", " ", "should", " ", "be", " ", "u"}]}], " ", "->", 
     " ", 
     RowBox[{"topk", 
      RowBox[{"(", "u", ")"}]}]}], ",", " ", 
    RowBox[{"but", " ", "less", " ", "convenient"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExLk", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{"1", " ", "-", " ", 
    RowBox[{"Total", "[", 
     RowBox[{"p", "[", 
      RowBox[{"[", 
       RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}]}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "difference", " ", "in", " ", "loss", " ", "by", " ", "linking", " ", "to",
     " ", "topk", 
    RowBox[{"(", "u", ")"}], " ", "instead", " ", "of", " ", "topk", 
    RowBox[{"(", "p", ")"}], " ", "thing"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Regret", "[", 
    RowBox[{"u_", ",", " ", "p_"}], "]"}], " ", ":=", " ", 
   RowBox[{
    RowBox[{"ExLk", "[", 
     RowBox[{"u", ",", "p"}], "]"}], " ", "-", " ", 
    RowBox[{"ExLk", "[", 
     RowBox[{"p", ",", "p"}], "]"}]}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"expected", " ", "regret", " ", "under", " ", "L3"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExRegL3", "[", "p_", "]"}], ":=", 
   RowBox[{"Regret", "[", 
    RowBox[{
     RowBox[{"PropL3", "[", "p", "]"}], ",", " ", "p"}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.852254714059908*^9, 3.852254714321166*^9}, {
   3.852254751391816*^9, 5.2150212799954*^-310}, {3.8522550527804832`*^9, 
   3.852255090637848*^9}, {3.852255195637582*^9, 3.852255222018835*^9}, {
   3.8522552768237753`*^9, 3.852255330491456*^9}, {3.852258389187961*^9, 
   3.852258483340625*^9}, {3.8522585181269608`*^9, 3.852258590997015*^9}, {
   3.852258635274312*^9, 3.852258688071879*^9}, {3.852258864948617*^9, 
   3.852258938276731*^9}, {3.852259925461679*^9, 3.85225994449669*^9}, {
   3.852259980227713*^9, 3.852259982061606*^9}, 3.852260093209496*^9, {
   3.8522601374375134`*^9, 3.852260153916514*^9}, {3.852260210877562*^9, 
   3.8522602211947937`*^9}, {3.8522602886949387`*^9, 3.852260318525379*^9}, {
   3.852260348671235*^9, 3.852260529698741*^9}, {3.852260698216097*^9, 
   3.85226072048123*^9}, {3.852294808619154*^9, 3.8522948184723177`*^9}, {
   3.852294981026062*^9, 3.8522950133934298`*^9}, {3.852295223954321*^9, 
   3.852295226101552*^9}, 3.852299820817745*^9, {3.852307919310197*^9, 
   3.852307919765318*^9}},
 CellLabel->
  "In[274]:=",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"u", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"5", ",", " ", "2", ",", " ", "3", ",", "1", ",", " ", "4"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"p", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"0", ",", ".1", ",", ".2", ",", ".3", ",", ".4"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Ordering", "[", 
   RowBox[{"u", ",", " ", 
    RowBox[{"-", "3"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"u", "[", 
   RowBox[{"[", " ", 
    RowBox[{"Ordering", "[", 
     RowBox[{"u", ",", 
      RowBox[{"-", "3"}]}], "]"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Total", "[", 
   RowBox[{"p", "[", 
    RowBox[{"[", 
     RowBox[{"TopK", "[", "u", "]"}], "]"}], "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExLk", "[", 
   RowBox[{"u", ",", "p"}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"PropL3", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegL3", "[", "p", "]"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"p", " ", "=", " ", 
  RowBox[{"{", 
   RowBox[{".22", ",", ".18", ",", ".2", ",", ".2", ",", ".2"}], 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{"PropL3", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ExRegL3", "[", "p", "]"}]}], "Input",
 CellChangeTimes->{{3.8522591950733957`*^9, 3.8522592201851473`*^9}, {
   3.852259259571013*^9, 3.852259284963015*^9}, {3.852259712224855*^9, 
   3.852259716093095*^9}, {3.852260027287763*^9, 3.852260064939968*^9}, {
   3.852260178388557*^9, 3.852260239723255*^9}, {3.8522605527159033`*^9, 
   3.852260633694853*^9}, 3.852260793815843*^9, {3.852294915290555*^9, 
   3.852294923839754*^9}, {3.852295133684231*^9, 3.852295175936159*^9}, 
   3.852295816135857*^9, {3.8523078758548813`*^9, 
   3.852307881726358*^9}},ExpressionUUID->"4e72b11a-da7d-4629-8c32-\
e5882270bff5"],

Cell[BoxData["0.3999999999999999`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297329826201*^9},
 CellLabel->"Out[95]=",ExpressionUUID->"8d932b6f-e202-4172-beb4-713e4e596074"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "2.`"}], ",", 
   RowBox[{"-", "2.`"}], ",", 
   RowBox[{"-", "2.`"}], ",", "0.`", ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297330090858*^9},
 CellLabel->"Out[96]=",ExpressionUUID->"0a48cbda-aa18-46f6-97ef-e4eec6267c8c"],

Cell[BoxData[
 RowBox[{"-", "1.1102230246251565`*^-16"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297330109778*^9},
 CellLabel->"Out[97]=",ExpressionUUID->"197c41b8-a5ef-499f-9022-dc9f7aab415a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.22`", ",", "0.18`", ",", "0.2`", ",", "0.2`", ",", "0.2`"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297330112094*^9},
 CellLabel->"Out[98]=",ExpressionUUID->"a29135a6-ef0c-4ffd-aca0-f99c1c8b897a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.`", ",", "0.`", ",", "0.`", ",", "0.`", ",", "0"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297330114255*^9},
 CellLabel->"Out[99]=",ExpressionUUID->"19111c0e-b2a6-4290-905e-e1b55a4189e6"],

Cell[BoxData["0.039999999999999925`"], "Output",
 CellChangeTimes->{{3.852259210238275*^9, 3.852259221493977*^9}, {
   3.852259272202195*^9, 3.852259286599978*^9}, 3.8522597175602913`*^9, {
   3.852260069401533*^9, 3.8522600976343193`*^9}, {3.852260181386248*^9, 
   3.852260206384932*^9}, 3.8522602404055023`*^9, {3.852260561893849*^9, 
   3.852260588975615*^9}, 3.8522606352546988`*^9, 3.852260747203745*^9, 
   3.852260794522869*^9, 3.8522948338901777`*^9, 3.852294925468494*^9, {
   3.85229500188818*^9, 3.85229502549872*^9}, {3.852295136196048*^9, 
   3.852295176240882*^9}, 3.8522958168539133`*^9, 3.852297330119093*^9},
 CellLabel->
  "Out[100]=",ExpressionUUID->"67966867-030d-4e8c-bd28-2688e2fbd7dd"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"nsamples", "=", "10"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"dirichletSamples", " ", "=", " ", 
    RowBox[{"RandomVariate", "[", 
     RowBox[{
      RowBox[{"DirichletDistribution", "[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], "]"}], 
      ",", "nsamples"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "last", " ", "entry", " ", "needs", " ", "to", " ", "be", " ", "inferred",
      " ", "as", " ", "1"}], " ", "-", " ", 
    RowBox[{"sum", 
     RowBox[{"(", "rest", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"samples", " ", "=", " ", 
   RowBox[{"MapThread", "[", 
    RowBox[{"Append", ",", " ", 
     RowBox[{"{", 
      RowBox[{"dirichletSamples", " ", ",", " ", 
       RowBox[{"1", " ", "-", " ", 
        RowBox[{"Map", "[", 
         RowBox[{"Total", ",", " ", "dirichletSamples"}], "]"}]}]}], "}"}]}], 
    "]"}]}], " ", ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.852295316265401*^9, 3.852295364547377*^9}, {
  3.8522959996141644`*^9, 3.852296012292088*^9}, {3.852296103698536*^9, 
  3.852296126425725*^9}, {3.852296373546874*^9, 3.852296414686594*^9}, {
  3.852296494348037*^9, 3.8522965514183483`*^9}, {3.852296586912484*^9, 
  3.852296598893618*^9}, {3.852296638552771*^9, 3.852296646751287*^9}, {
  3.852296683449399*^9, 3.852296724737359*^9}, {3.852296826460886*^9, 
  3.852296953967557*^9}, {3.85229705138454*^9, 3.852297164964346*^9}, {
  3.852297390879923*^9, 3.852297396255563*^9}, {3.8523083324020967`*^9, 
  3.852308332512672*^9}},
 CellLabel->
  "In[165]:=",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"sampledL3regrets", " ", "=", " ", 
   RowBox[{"Map", "[", 
    RowBox[{"ExRegL3", ",", "samples"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Mean", "[", "sampledL3regrets", "]"}]}], "Input",
 CellChangeTimes->{{3.852297198129825*^9, 3.8522972131024942`*^9}, {
  3.852297246416066*^9, 3.85229725356999*^9}, {3.852297346585836*^9, 
  3.8522973852078943`*^9}, {3.852308184909512*^9, 3.8523081893198013`*^9}},
 CellLabel->
  "In[168]:=",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],

Cell[BoxData["0.006655818103545363`"], "Output",
 CellChangeTimes->{
  3.852297214014969*^9, 3.852297248289308*^9, 3.852297334185616*^9, {
   3.852297386473589*^9, 3.8522974091191072`*^9}, 3.8522977608113317`*^9, 
   3.852308380850533*^9},
 CellLabel->
  "Out[169]=",ExpressionUUID->"d01553f6-6919-4301-b466-d892952c6f6c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"repset", " ", "=", " ", 
   RowBox[{"DeleteCases", "[", 
    RowBox[{
     RowBox[{"DeleteDuplicates", "[", 
      RowBox[{"Tuples", "[", 
       RowBox[{
        RowBox[{"Range", "[", 
         RowBox[{"0", ",", "k"}], "]"}], ",", " ", "n"}], "]"}], "]"}], ",", 
     " ", 
     RowBox[{"x_", " ", "/;", "  ", 
      RowBox[{
       RowBox[{
        RowBox[{"RankedMax", "[", 
         RowBox[{"x", ",", " ", "1"}], "]"}], " ", ">", " ", 
        RowBox[{
         RowBox[{"RankedMax", "[", 
          RowBox[{"x", ",", "2"}], "]"}], " ", "+", " ", "1"}]}], " ", "||", 
       "  ", 
       RowBox[{
        RowBox[{"RankedMax", "[", 
         RowBox[{"x", ",", " ", "2"}], "]"}], " ", ">", "  ", 
        RowBox[{
         RowBox[{"RankedMax", "[", 
          RowBox[{"x", ",", "3"}], "]"}], " ", "+", " ", "1"}]}], "||", "  ", 
       
       RowBox[{
        RowBox[{"RankedMax", "[", 
         RowBox[{"x", ",", " ", "3"}], "]"}], " ", ">", "  ", 
        RowBox[{
         RowBox[{"RankedMax", "[", 
          RowBox[{"x", ",", "4"}], "]"}], " ", "+", " ", "1"}]}], " ", "||", 
       RowBox[{
        RowBox[{"RankedMax", "[", 
         RowBox[{"x", ",", " ", "4"}], "]"}], " ", ">", "  ", 
        RowBox[{
         RowBox[{"RankedMax", "[", 
          RowBox[{"x", ",", "5"}], "]"}], " ", "+", " ", "1"}]}], " ", "||", 
       " ", 
       RowBox[{
        RowBox[{"RankedMax", "[", 
         RowBox[{"x", ",", 
          RowBox[{"k", "+", "1"}]}], "]"}], " ", ">", " ", "0"}]}]}]}], 
    "]"}]}], " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"RiskDiscreteL3", "[", "p_", "]"}], " ", ":=", " ", 
  RowBox[{"Min", "[", 
   RowBox[{"MapIndexed", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"ExL3", "[", 
       RowBox[{"#1", ",", " ", "p"}], "]"}], "&"}], ",", "repset"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PropDiscreteL3", "[", "p_", "]"}], " ", ":=", " ", 
  RowBox[{
   RowBox[{"DeleteCases", "[", 
    RowBox[{"repset", ",", " ", 
     RowBox[{"x_", " ", "/;", " ", 
      RowBox[{
       RowBox[{"ExL3", "[", 
        RowBox[{"x", ",", "p"}], "]"}], " ", ">", " ", 
       RowBox[{"Min", "[", 
        RowBox[{"MapIndexed", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ExL3", "[", 
            RowBox[{"#1", ",", " ", "p"}], "]"}], "&"}], ",", "repset"}], 
         "]"}], "]"}]}]}]}], "]"}], "[", 
   RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegDiscreteL3", "[", "p_", "]"}], ":=", 
  RowBox[{"Regret", "[", 
   RowBox[{
    RowBox[{"PropDiscreteL3", "[", "p", "]"}], ",", " ", "p"}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.852307608771388*^9, 3.8523076149447327`*^9}, {
   3.8523077739209623`*^9, 3.852307811524835*^9}, {3.852308019560465*^9, 
   3.852308021334859*^9}, 3.8523080572947474`*^9, {3.852308099875134*^9, 
   3.852308100453822*^9}, {3.852308150229521*^9, 3.85230815787537*^9}, {
   3.852308531997541*^9, 3.8523085448921623`*^9}, {3.852308580346982*^9, 
   3.8523085839802732`*^9}, {3.852308845261155*^9, 3.852308881932948*^9}, {
   3.852308949406704*^9, 3.8523089517339687`*^9}, {3.852309180629637*^9, 
   3.852309305642708*^9}, {3.852309674832823*^9, 3.852309675494141*^9}, {
   3.852310221544895*^9, 3.852310235735388*^9}, {3.852310508532812*^9, 
   3.852310512837875*^9}, {3.852310685340735*^9, 3.852310708836722*^9}, 
   3.852334907487125*^9},
 CellLabel->
  "In[384]:=",ExpressionUUID->"483d0946-4d0f-454d-9d99-4b25cd59ecb7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "2", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "2", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "1", ",", "3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "1", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "2", ",", "3", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "3", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "3", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "2", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "2", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0", ",", "3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "2", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "3", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "3", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "1", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "0", ",", "3", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "1", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "3", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "2", ",", "3", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "3", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "2", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "2", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "0", ",", "3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "2", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "3", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "3", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "0", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "3", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "3", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "3", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "3", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "1", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "0", ",", "3", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "1", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "3", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0", ",", "3", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "0", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "0", ",", "3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "1", ",", "3", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3", ",", "1", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "0", ",", "1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "0", ",", "2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "1", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "1", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "2", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0", ",", "2", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "1", ",", "0", ",", "0", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "1", ",", "0", ",", "2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "1", ",", "2", ",", "0", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "2", ",", "0", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "2", ",", "0", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "2", ",", "1", ",", "0", ",", "0"}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{3.8523349078516607`*^9},
 CellLabel->
  "Out[384]=",ExpressionUUID->"75bf2a46-947b-45f2-a020-d7bf1ecb57df"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"u", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"5", ",", " ", "2", ",", " ", "3", ",", "1", ",", " ", "4"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"p", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", ".11", ",", ".09", ",", ".3", ",", ".3"}], "}"}]}], 
   ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"PropL3", "[", "p", "]"}], "\[IndentingNewLine]", 
    RowBox[{"RiskL3", "[", "p", "]"}]}], "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"RiskDiscreteL3", "[", "p", "]"}], "\[IndentingNewLine]", 
    RowBox[{"RiskL3", "[", "p", "]"}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"PropDiscreteL3", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{"PropL3", "[", "p", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExRegDiscreteL3", "[", "p", "]"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"p", " ", "=", " ", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{".22", ",", ".18", ",", ".2", ",", ".2", ",", ".2"}], "}"}], 
     "\[IndentingNewLine]", 
     RowBox[{"PropL2", "[", "p", "]"}], "\[IndentingNewLine]", 
     RowBox[{"ExRegL2", "[", "p", "]"}]}]}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.852307837016753*^9, 3.85230790221377*^9}, {
   3.852307944919936*^9, 3.852307956439291*^9}, 3.852308063326219*^9, {
   3.852310266570037*^9, 3.8523102835783987`*^9}, {3.852310342664907*^9, 
   3.852310390463621*^9}, {3.85231043626543*^9, 3.852310484582843*^9}, {
   3.852310519057201*^9, 3.852310537631608*^9}},
 CellLabel->
  "In[321]:=",ExpressionUUID->"1410c378-18ab-4343-82c8-3ae83418762c"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "0", ",", "0", ",", "1", ",", "1"}], "}"}]], "Output",
 CellChangeTimes->{{3.852307907685285*^9, 3.852307930066436*^9}, 
   3.852307962382259*^9, 3.852308030287293*^9, 3.8523080638742037`*^9, 
   3.852308107131212*^9, 3.852308588417819*^9, 3.8523093576776342`*^9, 
   3.852309406863553*^9, 3.852309682428925*^9, {3.852310213611259*^9, 
   3.852310268167955*^9}, {3.8523103498230467`*^9, 3.852310373097479*^9}, {
   3.8523104430161667`*^9, 3.852310488224251*^9}, {3.8523105240562487`*^9, 
   3.852310540950633*^9}},
 CellLabel->
  "Out[323]=",ExpressionUUID->"87049303-38b7-44df-af9a-3bd71eecedf6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "23.58466077004201`"}], ",", 
   RowBox[{"-", "1.0000000366684942`"}], ",", 
   RowBox[{"-", "1.0000000407196492`"}], ",", 
   RowBox[{"-", "3.888757451934354`*^-8"}], ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{{3.852307907685285*^9, 3.852307930066436*^9}, 
   3.852307962382259*^9, 3.852308030287293*^9, 3.8523080638742037`*^9, 
   3.852308107131212*^9, 3.852308588417819*^9, 3.8523093576776342`*^9, 
   3.852309406863553*^9, 3.852309682428925*^9, {3.852310213611259*^9, 
   3.852310268167955*^9}, {3.8523103498230467`*^9, 3.852310373097479*^9}, {
   3.8523104430161667`*^9, 3.852310488224251*^9}, {3.8523105240562487`*^9, 
   3.852310545231102*^9}},
 CellLabel->
  "Out[324]=",ExpressionUUID->"6f869b52-5a5d-44b4-8b8c-c70f16adb257"],

Cell[BoxData["0.020000000000000018`"], "Output",
 CellChangeTimes->{{3.852307907685285*^9, 3.852307930066436*^9}, 
   3.852307962382259*^9, 3.852308030287293*^9, 3.8523080638742037`*^9, 
   3.852308107131212*^9, 3.852308588417819*^9, 3.8523093576776342`*^9, 
   3.852309406863553*^9, 3.852309682428925*^9, {3.852310213611259*^9, 
   3.852310268167955*^9}, {3.8523103498230467`*^9, 3.852310373097479*^9}, {
   3.8523104430161667`*^9, 3.852310488224251*^9}, {3.8523105240562487`*^9, 
   3.8523105484627523`*^9}},
 CellLabel->
  "Out[325]=",ExpressionUUID->"e6257e33-ba52-498c-a614-3388929aedf3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"nsamples", "=", "100"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"dirichletSamples", " ", "=", " ", 
    RowBox[{"RandomVariate", "[", 
     RowBox[{
      RowBox[{"DirichletDistribution", "[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], "]"}], 
      ",", "nsamples"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "last", " ", "entry", " ", "needs", " ", "to", " ", "be", " ", "inferred",
      " ", "as", " ", "1"}], " ", "-", " ", 
    RowBox[{"sum", 
     RowBox[{"(", "rest", ")"}]}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"samples", " ", "=", " ", 
   RowBox[{"MapThread", "[", 
    RowBox[{"Append", ",", " ", 
     RowBox[{"{", 
      RowBox[{"dirichletSamples", " ", ",", " ", 
       RowBox[{"1", " ", "-", " ", 
        RowBox[{"Map", "[", 
         RowBox[{"Total", ",", " ", "dirichletSamples"}], "]"}]}]}], "}"}]}], 
    "]"}]}], " ", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"sampledL3regrets", " ", "=", " ", 
   RowBox[{"Map", "[", 
    RowBox[{"ExRegDiscreteL3", ",", "samples"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Mean", "[", "sampledL3regrets", "]"}]}], "Input",
 CellChangeTimes->{{3.8523081754743958`*^9, 3.8523082024497547`*^9}, 
   3.8523082942532988`*^9, {3.8523098351683702`*^9, 3.852309835314665*^9}, {
   3.852310902860355*^9, 
   3.8523109335172453`*^9}},ExpressionUUID->"831428e2-de03-4c1c-a73a-\
99a3afcacb41"],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{{3.852308291302455*^9, 3.852308319138523*^9}, 
   3.85230959427159*^9, {3.852309685500648*^9, 3.852309689580448*^9}, 
   3.852309842281537*^9, {3.852310907853944*^9, 3.85231093166012*^9}},
 CellLabel->
  "Out[343]=",ExpressionUUID->"b9b2e83b-4059-4e4e-bedc-7a754a6d9521"],

Cell[BoxData["0.`"], "Output",
 CellChangeTimes->{{3.852308291302455*^9, 3.852308319138523*^9}, 
   3.85230959427159*^9, {3.852309685500648*^9, 3.852309689580448*^9}, 
   3.852309842281537*^9, {3.852310907853944*^9, 3.85231093166398*^9}},
 CellLabel->
  "Out[344]=",ExpressionUUID->"c3c966dc-8fcd-4624-a529-6be79c064e80"]
}, Open  ]]
},
WindowSize->{1032, 692},
WindowMargins->{{149, Automatic}, {344, Automatic}},
FrontEndVersion->"13.0 for Mac OS X x86 (64-bit) (December 2, 2021)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"67b702ab-34b7-4aba-853f-c58f0d1e76e3"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 6141, 169, 451, "Input",ExpressionUUID->"baa4e2f1-2bf7-48e9-8bc0-c578eb2daf60"],
Cell[CellGroupData[{
Cell[6724, 193, 1970, 49, 304, "Input",ExpressionUUID->"4e72b11a-da7d-4629-8c32-e5882270bff5"],
Cell[8697, 244, 703, 9, 34, "Output",ExpressionUUID->"8d932b6f-e202-4172-beb4-713e4e596074"],
Cell[9403, 255, 825, 14, 34, "Output",ExpressionUUID->"0a48cbda-aa18-46f6-97ef-e4eec6267c8c"],
Cell[10231, 271, 725, 10, 34, "Output",ExpressionUUID->"197c41b8-a5ef-499f-9022-dc9f7aab415a"],
Cell[10959, 283, 780, 12, 34, "Output",ExpressionUUID->"a29135a6-ef0c-4ffd-aca0-f99c1c8b897a"],
Cell[11742, 297, 771, 12, 34, "Output",ExpressionUUID->"19111c0e-b2a6-4290-905e-e1b55a4189e6"],
Cell[12516, 311, 709, 10, 34, "Output",ExpressionUUID->"67966867-030d-4e8c-bd28-2688e2fbd7dd"]
}, Open  ]],
Cell[13240, 324, 1732, 39, 115, "Input",ExpressionUUID->"46516108-b5c7-4d13-8016-2a41270f195f"],
Cell[CellGroupData[{
Cell[14997, 367, 536, 11, 52, "Input",ExpressionUUID->"32af83c5-f7f9-4dcf-8dd1-556f9340eca9"],
Cell[15536, 380, 322, 6, 34, "Output",ExpressionUUID->"d01553f6-6919-4301-b466-d892952c6f6c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[15895, 391, 3497, 89, 136, "Input",ExpressionUUID->"483d0946-4d0f-454d-9d99-4b25cd59ecb7"],
Cell[19395, 482, 14957, 338, 518, "Output",ExpressionUUID->"75bf2a46-947b-45f2-a020-d7bf1ecb57df"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34389, 825, 1740, 41, 325, "Input",ExpressionUUID->"1410c378-18ab-4343-82c8-3ae83418762c"],
Cell[36132, 868, 646, 11, 34, "Output",ExpressionUUID->"87049303-38b7-44df-af9a-3bd71eecedf6"],
Cell[36781, 881, 796, 15, 37, "Output",ExpressionUUID->"6f869b52-5a5d-44b4-8b8c-c70f16adb257"],
Cell[37580, 898, 593, 9, 34, "Output",ExpressionUUID->"e6257e33-ba52-498c-a614-3388929aedf3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[38210, 912, 1530, 39, 136, "Input",ExpressionUUID->"831428e2-de03-4c1c-a73a-99a3afcacb41"],
Cell[39743, 953, 326, 5, 34, "Output",ExpressionUUID->"b9b2e83b-4059-4e4e-bedc-7a754a6d9521"],
Cell[40072, 960, 321, 5, 34, "Output",ExpressionUUID->"c3c966dc-8fcd-4624-a529-6be79c064e80"]
}, Open  ]]
}
]
*)

